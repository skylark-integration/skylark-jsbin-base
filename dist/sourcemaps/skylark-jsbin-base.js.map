{"version":3,"sources":["skylark-jsbin-base.js"],"names":["define","skylark","objects","$","jsbin","attach","window","mixin","console","log","e","warn","trace","error","throttle","fn","delay","throttled","context","this","args","arguments","cancel","timer","setTimeout","apply","clearTimeout","expr","host","obj","index","meta","storedSettings","store","localStorage","getItem","embed","user","name","settings","extend","font","parseInt","JSON","parse","mobile","test","navigator","userAgent","tablet","ie","v","div","document","createElement","all","getElementsByTagName","innerHTML","undef","location","origin","pathname","root","setItem","editor","codemirror","theme","documentElement","addClass","split","ajaxPrefilter","options","original","xhr","head","get","type","toLowerCase","url","match","setRequestHeader","state","token","owner","metadata","getURL","withoutRoot","code","latest","withRevision","revision","updateSettings","update","method","checksum","ajax","data","el","$window","$body","$document","$bin","undefined","debug","unload","sessionStorage","stringify","panels","saveOnExit","save","savecontent","panel","focused","id","browser","opera","setInterval","one","removeAttr","indexOf","replace","on","addEventListener","event","updated","last_updated","Date","getTime","html","setCode","template","javascript","css","click","active","body","appendChild","tabindex","style","position","padding","bottom","right","margin","fontSize","color","background","whiteSpace","maxWidth","zIndex","pointerEvents","lastActive","showActive","activeElement","attrs","attributes","i","length","value","textContent","nodeName","requestAnimationFrame","escapeHTML","String","main"],"mappings":"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","file":"../skylark-jsbin-base.js","sourcesContent":["define('skylark-jsbin-base/jsbin',[\r\n  \"skylark-langx-ns\",\r\n  \"skylark-langx-objects\",\r\n  \"skylark-jquery\"\r\n],function(skylark,objects,$){\r\n  'use strict';\r\n\r\n  var jsbin = skylark.attach(\"intg.jsbin\");\r\n  if (window.jsbin) {\r\n    objects.mixin(jsbin,window.jsbin);\r\n    window.jsbin = jsbin;\r\n  }\r\n\r\n  try {\r\n    console.log('Dave is ready.');\r\n  } catch (e) {\r\n    window.console = {\r\n      log: function () {\r\n        // alert([].slice.call(arguments).join('\\n'));\r\n      },\r\n      warn: function () {},\r\n      trace: function () {},\r\n      error: function () {}\r\n    };\r\n  }\r\n\r\n  // required because jQuery 1.4.4 lost ability to search my object property :( (i.e. a[host=foo.com])\r\n  $.expr[':'].host = function(obj, index, meta) {\r\n    return obj.host === meta[3];\r\n  };\r\n\r\n  function throttle(fn, delay) {\r\n    var throttled = function () {\r\n      var context = this, args = arguments;\r\n      throttled.cancel();\r\n      throttled.timer = setTimeout(function () {\r\n        fn.apply(context, args);\r\n      }, delay);\r\n    };\r\n\r\n    throttled.cancel = function () {\r\n      clearTimeout(throttled.timer);\r\n    };\r\n\r\n    return throttled;\r\n  }\r\n\r\n  function debounceAsync(fn) {\r\n    'use strict';\r\n    var waiting = false;\r\n    var last = null;\r\n\r\n    return function debouceRunner() {\r\n      var args = [].slice.call(arguments, 0);\r\n      // console.time('tracker');\r\n\r\n      var tracker = function () {\r\n        waiting = false;\r\n          // console.timeEnd('tracker');\r\n        if (last) {\r\n          // console.log('applying the last');\r\n          fn.apply(last.context, last.args);\r\n          // console.log('and now clear');\r\n          last = null;\r\n        }\r\n      };\r\n\r\n      // put the tracker in place of the callback\r\n      args.push(tracker);\r\n\r\n      if (!waiting) {\r\n        // console.log('running this time...');\r\n        waiting = true;\r\n        return fn.apply(this, args);\r\n      } else {\r\n        // console.log('going to wait...');\r\n        last = { args: args, context: this };\r\n      }\r\n    };\r\n  }\r\n\r\n  function escapeHTML(html){\r\n    return String(html)\r\n      .replace(/&(?!\\w+;)/g, '&amp;')\r\n      .replace(/</g, '&lt;')\r\n      .replace(/>/g, '&gt;')\r\n      .replace(/\"/g, '&quot;');\r\n  }\r\n\r\n  function dedupe(array) {\r\n    var hash    = {},\r\n        results = [],\r\n        hasOwn  = Object.prototype.hasOwnProperty,\r\n        i, item, len;\r\n\r\n    for (i = 0, len = array.length; i < len; i += 1) {\r\n      item = array[i];\r\n\r\n      if (!hasOwn.call(hash, item)) {\r\n        hash[item] = 1;\r\n        results.push(item);\r\n      }\r\n    }\r\n\r\n    return results;\r\n  }\r\n\r\n  function isDOM(obj) {\r\n    'use strict';\r\n    var Node = window.Node || false;\r\n    if (Node) {\r\n      return obj instanceof Node;\r\n    }\r\n    return obj.nodeType === 1;\r\n  }\r\n\r\n  /*\r\n  function exposeSettings() {\r\n    'use strict';\r\n\r\n    function mockEditor (editor, methods) {\r\n      return methods.reduce(function (mockEditor, method) {\r\n        mockEditor[method] = editor[method].bind(editor);\r\n        return mockEditor;\r\n      }, {});\r\n    }\r\n\r\n    function mockPanels() {\r\n      var results = {};\r\n      var panels = jsbin.panels.panels;\r\n      ['css', 'javascript', 'html'].forEach(function (type) {\r\n        results[type] = {\r\n          setCode: panels[type].setCode.bind(panels[type]),\r\n          getCode: panels[type].getCode.bind(panels[type]),\r\n          editor: mockEditor(panels[type].editor, [\r\n            'setCursor',\r\n            'getCursor',\r\n            'addKeyMap',\r\n            'on'\r\n          ])\r\n        };\r\n      });\r\n\r\n      return results;\r\n    }\r\n\r\n   // unnecessary? // lwf\r\n    if (isDOM(window.jsbin) || !window.jsbin || !window.jsbin.state) { // because...STUPIDITY!!!\r\n       window.jsbin = {\r\n        user: $.extend(true, {}, window.jsbin.user, jsbin.user),\r\n        'static': jsbin['static'],\r\n        version: jsbin.version,\r\n        analytics: jsbin.analytics,\r\n        state: {\r\n          title: jsbin.state.title,\r\n          description: jsbin.state.description\r\n        },\r\n        embed: jsbin.embed,\r\n        panels: {\r\n          // FIXME decide whether this should be locked down further\r\n          panels: mockPanels()\r\n        }\r\n      }; // create the holding object\r\n\r\n      if (jsbin.state.metadata && jsbin.user && jsbin.state.metadata.name === jsbin.user.name && jsbin.user.name) {\r\n        window.jsbin.settings = jsbin.settings;\r\n        return;\r\n      }\r\n\r\n      var key = 'o' + (Math.random() * 1).toString(32).slice(2);\r\n      Object.defineProperty(window, key, {\r\n        get:function () {\r\n          window.jsbin.settings = jsbin.settings;\r\n          console.log('jsbin.settings can now be modified on the console');\r\n        }\r\n      });\r\n      if (!jsbin.embed) {\r\n        console.log('To edit settings, type this string into the console: ' + key);\r\n      }\r\n    }\r\n  }\r\n  */\r\n\r\n  var storedSettings = store.localStorage.getItem('settings');\r\n  if (storedSettings === 'undefined' || jsbin.embed) {\r\n    // yes, equals the *string* 'undefined', then something went wrong\r\n    storedSettings = null;\r\n  }\r\n\r\n  // try to copy across statics\r\n  /*\r\n   // unnecessary? // lwf\r\n  ['root', 'shareRoot', 'runner', 'static', 'version'].map(function (key) {\r\n    if (!jsbin[key]) {\r\n      jsbin[key] = window.jsbin[key];\r\n    }\r\n  });\r\n  */\r\n  if (jsbin.user && jsbin.user.name) {\r\n    jsbin.settings = $.extend(true, {}, jsbin.user.settings, jsbin.settings);\r\n    if (jsbin.user.settings.font) {\r\n      jsbin.settings.font = parseInt(jsbin.user.settings.font, 10);\r\n    }\r\n  } else {\r\n    // In all cases localStorage takes precedence over user settings so users can\r\n    // configure it from the console and overwrite the server delivered settings\r\n    jsbin.settings = $.extend({}, jsbin.settings, JSON.parse(storedSettings || '{}'));\r\n  }\r\n\r\n  // if the above code isn't dodgy, this for hellz bells is:\r\n  jsbin.mobile = /WebKit.*Mobile.*|Android/.test(navigator.userAgent);\r\n  jsbin.tablet = /iPad/i.test(navigator.userAgent); // sue me.\r\n  // IE detect - sadly uglify is compressing the \\v1 trick to death :(\r\n  // via @padolsey & @jdalton - https://gist.github.com/527683\r\n  jsbin.ie = (function(){\r\n    var undef,\r\n        v = 3,\r\n        div = document.createElement('div'),\r\n        all = div.getElementsByTagName('i');\r\n    while (\r\n      div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',\r\n      all[0]\r\n    ) {}\r\n    return v > 4 ? v : undef;\r\n  }());\r\n\r\n  if (!storedSettings && (location.origin + location.pathname) === jsbin.root + '/') {\r\n    // first timer - let's welcome them shall we, Dave?\r\n    store.localStorage.setItem('settings', '{}');\r\n  }\r\n\r\n  if (!jsbin.settings.editor) {\r\n    // backward compat with jsbin-v2\r\n    jsbin.settings.editor = {};\r\n  }\r\n\r\n  if (jsbin.settings.codemirror) {\r\n    $.extend(jsbin.settings.editor, jsbin.settings.codemirror);\r\n  }\r\n\r\n  if (jsbin.settings.editor.theme) {\r\n    $(document.documentElement).addClass('cm-s-' + jsbin.settings.editor.theme.split(' ')[0]);\r\n  }\r\n\r\n  // Add a pre-filter to all ajax requests to add a CSRF header to prevent\r\n  // malicious form submissions from other domains.\r\n  $.ajaxPrefilter(function (options, original, xhr) {\r\n    var skip = {head: 1, get: 1};\r\n    if (!skip[options.type.toLowerCase()] &&\r\n        !options.url.match(/^https:\\/\\/api.github.com/)) {\r\n      xhr.setRequestHeader('x-csrf-token', jsbin.state.token);\r\n    }\r\n  });\r\n\r\n  jsbin.owner = function () {\r\n    return jsbin.user && jsbin.user.name && jsbin.state.metadata && jsbin.state.metadata.name === jsbin.user.name;\r\n  };\r\n\r\n  jsbin.getURL = function (options) {\r\n    if (!options) { options = {}; }\r\n\r\n    var withoutRoot = options.withoutRoot;\r\n    var root = options.root || jsbin.root;\r\n    var url = withoutRoot ? '' : root;\r\n    var state = jsbin.state;\r\n\r\n    if (state.code) {\r\n      url += '/' + state.code;\r\n\r\n      if (!state.latest || options.withRevision) { //} && state.revision !== 1) {\r\n        if (options.withRevision !== false) {\r\n          url += '/' + (state.revision || 1);\r\n        }\r\n      }\r\n    }\r\n    return url;\r\n  };\r\n\r\n  jsbin.state.updateSettings = throttle(function updateBinSettingsInner(update, method) {\r\n    if (!method) {\r\n      method = 'POST';\r\n    }\r\n\r\n    if (jsbin.state.code) {\r\n      update.checksum = jsbin.state.checksum;\r\n      $.ajax({\r\n        type: method, // consistency ftw :-\\\r\n        url: jsbin.getURL({ withRevision: true }) + '/settings',\r\n        data: update\r\n      });\r\n    }\r\n  }, 500);\r\n\r\n\r\n  function objectValue(path, context) {\r\n    var props = path.split('.'),\r\n        length = props.length,\r\n        i = 1,\r\n        currentProp = context || window,\r\n        value = currentProp[path];\r\n    try {\r\n      if (currentProp[props[0]] !== undefined) {\r\n        currentProp = currentProp[props[0]];\r\n        for (; i < length; i++) {\r\n          if (currentProp[props[i]] === undefined) {\r\n            break;\r\n          } else if (i === length - 1) {\r\n            value = currentProp[props[i]];\r\n          }\r\n          currentProp = currentProp[props[i]];\r\n        }\r\n      }\r\n    } catch (e) {\r\n      value = undefined;\r\n    }\r\n\r\n    return value;\r\n  }\r\n\r\n\r\n  var $window = $(window),\r\n      $body = $('body'),\r\n      $document = $(document),\r\n      debug = jsbin.settings.debug === undefined ? false : jsbin.settings.debug,\r\n      documentTitle = 'JS Bin',\r\n      $bin = $('#bin'),\r\n      loadGist,\r\n      // splitterSettings = JSON.parse(store.localStorage.getItem('splitterSettings') || '[ { \"x\" : null }, { \"x\" : null } ]'),\r\n      unload = function () {\r\n        store.sessionStorage.setItem('url', jsbin.getURL());\r\n        store.localStorage.setItem('settings', JSON.stringify(jsbin.settings));\r\n\r\n        if (jsbin.panels.saveOnExit === false) {\r\n          return;\r\n        }\r\n\r\n        jsbin.panels.save();\r\n        jsbin.panels.savecontent();\r\n\r\n        var panel = jsbin.panels.focused;\r\n        if (panel) {\r\n          store.sessionStorage.setItem('panel', panel.id);\r\n        }\r\n      };\r\n\r\n  $window.unload(unload);\r\n\r\n  // window.addEventListener('storage', function (e) {\r\n  //   if (e.storageArea === localStorage && e.key === 'settings') {\r\n  //     console.log('updating from storage');\r\n  //     console.log(JSON.parse(store.localStorage.settings));\r\n  //     jsbin.settings = JSON.parse(store.localStorage.settings);\r\n  //   }\r\n  // });\r\n\r\n  // hack for Opera because the unload event isn't firing to capture the settings, so we put it on a timer\r\n  if ($.browser.opera) {\r\n    setInterval(unload, 500);\r\n  }\r\n\r\n  $document.one('jsbinReady', function () {\r\n    ///exposeSettings();\r\n    $bin.removeAttr('style');\r\n    $body.addClass('ready');\r\n  });\r\n\r\n  if (navigator.userAgent.indexOf(' Mac ') !== -1) {\r\n    (function () {\r\n    var el = $('#keyboardHelp')[0];\r\n    el.innerHTML = el.innerHTML.replace(/ctrl/g, 'cmd').replace(/Ctrl/g, 'ctrl');\r\n    })();\r\n  }\r\n\r\n  if (jsbin.embed) {\r\n    $window.on('focus', function () {\r\n      return false;\r\n    });\r\n  }\r\n\r\n  window.addEventListener('message', function (event) {\r\n    var data;\r\n    try {\r\n      data = JSON.parse(event.data);\r\n    } catch (e) {\r\n      return;\r\n    }\r\n\r\n    if (data.type === 'cached') {\r\n      if (data.updated > jsbin.state.metadata.last_updated || !jsbin.state.metadata.last_updated) {\r\n        console.log('restored from cache: %sms newer', (new Date(data.updated).getTime() - new Date(jsbin.state.metadata.last_updated).getTime()) / 100);\r\n        // update the bin\r\n        jsbin.panels.panels.html.setCode(data.template.html);\r\n        jsbin.panels.panels.javascript.setCode(data.template.javascript);\r\n        jsbin.panels.panels.css.setCode(data.template.css);\r\n        $('a.save:first').click();\r\n      }\r\n    }\r\n  });\r\n\r\n  (function() {\r\n    if (!jsbin.settings.debug) {\r\n      return;\r\n    }\r\n\r\n    var active = document.createElement('pre');\r\n    document.body.appendChild(active);\r\n    active.tabindex = -1;\r\n    objects.mixin(active.style, { // warning: `with` I know what I'm doing!\r\n      position : 'fixed',\r\n      padding : '2px',\r\n      bottom : '20px',\r\n      right : '20px',\r\n      margin : 0,\r\n      fontSize : 12,\r\n      color : '#fff',\r\n      background : '#aaa',\r\n      whiteSpace : 'pre-wrap',\r\n      maxWidth : '95%',\r\n      zIndex : 10000000,\r\n      pointerEvents : 'none'\r\n    });\r\n\r\n    var lastActive = null;\r\n    var showActive = function () {\r\n      var el = document.activeElement;\r\n      var html = '';\r\n      var attrs = el.attributes;\r\n      var i = 0;\r\n\r\n      if (el !== lastActive && el !== active) {\r\n        for (; i < attrs.length; i++) {\r\n          html += ' ' + attrs[i].name + '=\"' + attrs[i].value + '\"';\r\n        }\r\n\r\n        active.textContent = '<' + el.nodeName.toLowerCase() + html + '>';\r\n        lastActive = el;\r\n      }\r\n\r\n      requestAnimationFrame(showActive);\r\n    };\r\n\r\n    showActive();\r\n\r\n\r\n  })();\r\n\r\n  jsbin.$document = $document;\r\n  jsbin.$window = $window;\r\n  jsbin.throttle = throttle;\r\n  jsbin.escapeHTML = escapeHTML;\r\n\r\n\r\n  return jsbin;\r\n\r\n});\r\n\r\n\ndefine('skylark-jsbin-base/main',[\r\n\t\"./jsbin\"\r\n],function(jsbin){\r\n\treturn jsbin;\r\n});\ndefine('skylark-jsbin-base', ['skylark-jsbin-base/main'], function (main) { return main; });\n\n"]}