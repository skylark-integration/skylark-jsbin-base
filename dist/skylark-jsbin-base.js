/**
 * skylark-jsbin-base - A version of jsbin-client  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsbin-base/
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,i="function"==typeof n&&n.amd,r=!i&&"undefined"!=typeof exports;if(!i&&!n){var a={};n=t.define=function(e,t,n){"function"==typeof n?(a[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),i=e.split("/");n.pop();for(var r=0;r<i.length;r++)"."!=i[r]&&(".."==i[r]?n.pop():n.push(i[r]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):a[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!a.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=a[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-jsbin-base/storage",["skylark-jquery"],function(e){function t(e){try{return e in window&&null!==window[e]}catch(e){return!1}}var n,i,r,a,o,s,l=!1;return t("sessionStorage")?n=window.sessionStorage:(l=!0,r=window.name?JSON.parse(window.name):{},a=Object.keys(r),o=a.length,s={key:function(e){return Object.keys(r)[e]||null},length:o,clear:function(){r={},window.name="",s.length=0},getItem:function(e){return r[e]||null},removeItem:function(e){delete r[e],window.name=JSON.stringify(r),s.length--},setItem:function(e,t){r[e]=t,window.name=JSON.stringify(r),s.length++}},a.forEach(function(e){s[e]=r[e]}),n=s),t("localStorage")?t("localStorage")&&(i=window.localStorage):i=e.extend({},n),{polyfill:l,sessionStorage:n,localStorage:i}}),e("skylark-jsbin-base/jsbin",["skylark-langx-ns","skylark-langx-objects","skylark-jquery","./storage"],function(e,t,n,i){"use strict";var r=e.attach("intg.jsbin");window.jsbin&&(t.mixin(r,window.jsbin),window.jsbin=r);try{console.log("Dave is ready.")}catch(e){window.console={log:function(){},warn:function(){},trace:function(){},error:function(){}}}function a(e,t){var n=function(){var i=this,r=arguments;n.cancel(),n.timer=setTimeout(function(){e.apply(i,r)},t)};return n.cancel=function(){clearTimeout(n.timer)},n}n.expr[":"].host=function(e,t,n){return e.host===n[3]};var o=i.localStorage.getItem("settings");("undefined"===o||r.embed)&&(o=null),r.user&&r.user.name?(r.settings=n.extend(!0,{},r.user.settings,r.settings),r.user.settings.font&&(r.settings.font=parseInt(r.user.settings.font,10))):r.settings=n.extend({},r.settings,JSON.parse(o||"{}")),r.mobile=/WebKit.*Mobile.*|Android/.test(navigator.userAgent),r.tablet=/iPad/i.test(navigator.userAgent),r.ie=function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e>4?e:void 0}(),o||location.origin+location.pathname!==r.root+"/"||i.localStorage.setItem("settings","{}"),r.settings.editor||(r.settings.editor={}),r.settings.codemirror&&n.extend(r.settings.editor,r.settings.codemirror),r.settings.editor.theme&&n(document.documentElement).addClass("cm-s-"+r.settings.editor.theme.split(" ")[0]),n.ajaxPrefilter(function(e,t,n){({head:1,get:1})[e.type.toLowerCase()]||e.url.match(/^https:\/\/api.github.com/)||n.setRequestHeader("x-csrf-token",r.state.token)}),r.owner=function(){return r.user&&r.user.name&&r.state.metadata&&r.state.metadata.name===r.user.name},r.getURL=function(e){e||(e={});var t=e.withoutRoot,n=e.root||r.root,i=t?"":n,a=r.state;return a.code&&(i+="/"+a.code,a.latest&&!e.withRevision||!1!==e.withRevision&&(i+="/"+(a.revision||1))),i},r.state.updateSettings=a(function(e,t){t||(t="POST"),r.state.code&&(e.checksum=r.state.checksum,n.ajax({type:t,url:r.getURL({withRevision:!0})+"/settings",data:e}))},500);var s,l=n(window),u=n("body"),c=n(document),d=(void 0!==r.settings.debug&&r.settings.debug,n("#bin")),f=function(){if(i.sessionStorage.setItem("url",r.getURL()),i.localStorage.setItem("settings",JSON.stringify(r.settings)),!1!==r.panels.saveOnExit){r.panels.save(),r.panels.savecontent();var e=r.panels.focused;e&&i.sessionStorage.setItem("panel",e.id)}};return l.unload(f),n.browser.opera&&setInterval(f,500),c.one("jsbinReady",function(){d.removeAttr("style"),u.addClass("ready")}),-1!==navigator.userAgent.indexOf(" Mac ")&&((s=n("#keyboardHelp")[0]).innerHTML=s.innerHTML.replace(/ctrl/g,"cmd").replace(/Ctrl/g,"ctrl")),r.embed&&l.on("focus",function(){return!1}),window.addEventListener("message",function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}"cached"===t.type&&(t.updated>r.state.metadata.last_updated||!r.state.metadata.last_updated)&&(console.log("restored from cache: %sms newer",(new Date(t.updated).getTime()-new Date(r.state.metadata.last_updated).getTime())/100),r.panels.panels.html.setCode(t.template.html),r.panels.panels.javascript.setCode(t.template.javascript),r.panels.panels.css.setCode(t.template.css),n("a.save:first").click())}),function(){if(r.settings.debug){var e=document.createElement("pre");document.body.appendChild(e),e.tabindex=-1,t.mixin(e.style,{position:"fixed",padding:"2px",bottom:"20px",right:"20px",margin:0,fontSize:12,color:"#fff",background:"#aaa",whiteSpace:"pre-wrap",maxWidth:"95%",zIndex:1e7,pointerEvents:"none"});var n=null,i=function(){var t=document.activeElement,r="",a=t.attributes,o=0;if(t!==n&&t!==e){for(;o<a.length;o++)r+=" "+a[o].name+'="'+a[o].value+'"';e.textContent="<"+t.nodeName.toLowerCase()+r+">",n=t}requestAnimationFrame(i)};i()}}(),r.$document=c,r.$body=u,r.$window=l,r.throttle=a,r.escapeHTML=function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},r.debounceAsync=function(e){var t=!1,n=null;return function(){var i=[].slice.call(arguments,0);if(i.push(function(){t=!1,n&&(e.apply(n.context,n.args),n=null)}),!t)return t=!0,e.apply(this,i);n={args:i,context:this}}},r.objectValue=function(e,t){var n=e.split("."),i=n.length,r=1,a=t||window,o=a[e];try{if(void 0!==a[n[0]])for(a=a[n[0]];r<i&&void 0!==a[n[r]];r++)r===i-1&&(o=a[n[r]]),a=a[n[r]]}catch(e){o=void 0}return o},r.loginVisible=!1,r.dropdownOpen=!1,r.keyboardHelpVisible=!1,r.urlHelpVisible=!1,r.sideNavVisible=!1,r.infocardVisible=!1,r}),e("skylark-jsbin-base/main",["./jsbin"],function(e){return e}),e("skylark-jsbin-base",["skylark-jsbin-base/main"],function(e){return e})}(n),!i){var o=require("skylark-langx-ns");r?module.exports=o:t.skylarkjs=o}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-jsbin-base.js.map
