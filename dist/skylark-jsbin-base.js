/**
 * skylark-jsbin-base - A version of jsbin-client  that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsbin-base/
 * @license MIT
 */
!function(e,t){var n=t.define,require=t.require,i="function"==typeof n&&n.amd,o=!i&&"undefined"!=typeof exports;if(!i&&!n){var r={};n=t.define=function(e,t,n){"function"==typeof n?(r[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),i=e.split("/");n.pop();for(var o=0;o<i.length;o++)"."!=i[o]&&(".."==i[o]?n.pop():n.push(i[o]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):r[e]={factory:null,resolved:!0,exports:n}},require=t.require=function(e){if(!r.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=r[e];if(!module.resolved){var n=[];module.deps.forEach(function(e){n.push(require(e))}),module.exports=module.factory.apply(t,n)||null,module.resolved=!0}return module.exports}}if(!n)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,require){e("skylark-jsbin-base/storage",["skylark-jquery"],function(e){function t(e){try{return e in window&&null!==window[e]}catch(e){return!1}}var n,i,o,r,s,a,l=!1;return t("sessionStorage")?n=window.sessionStorage:(l=!0,o=window.name?JSON.parse(window.name):{},r=Object.keys(o),s=r.length,a={key:function(e){return Object.keys(o)[e]||null},length:s,clear:function(){o={},window.name="",a.length=0},getItem:function(e){return o[e]||null},removeItem:function(e){delete o[e],window.name=JSON.stringify(o),a.length--},setItem:function(e,t){o[e]=t,window.name=JSON.stringify(o),a.length++}},r.forEach(function(e){a[e]=o[e]}),n=a),t("localStorage")?t("localStorage")&&(i=window.localStorage):i=e.extend({},n),{polyfill:l,sessionStorage:n,localStorage:i}}),e("skylark-jsbin-base/jsbin",["skylark-langx-ns","skylark-langx-objects","skylark-jquery","./storage"],function(e,t,n,i){"use strict";var o=e.attach("intg.jsbin");window.jsbin&&(t.mixin(o,window.jsbin),window.jsbin=o);try{console.log("Dave is ready.")}catch(e){window.console={log:function(){},warn:function(){},trace:function(){},error:function(){}}}function r(e,t){var n=function(){var i=this,o=arguments;n.cancel(),n.timer=setTimeout(function(){e.apply(i,o)},t)};return n.cancel=function(){clearTimeout(n.timer)},n}n.expr[":"].host=function(e,t,n){return e.host===n[3]};var s=i.localStorage.getItem("settings");return("undefined"===s||o.embed)&&(s=null),o.user&&o.user.name?(o.settings=n.extend(!0,{},o.user.settings,o.settings),o.user.settings.font&&(o.settings.font=parseInt(o.user.settings.font,10))):o.settings=n.extend({},o.settings,JSON.parse(s||"{}")),o.mobile=/WebKit.*Mobile.*|Android/.test(navigator.userAgent),o.tablet=/iPad/i.test(navigator.userAgent),o.ie=function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e>4?e:void 0}(),s||location.origin+location.pathname!==o.root+"/"||i.localStorage.setItem("settings","{}"),o.settings.editor||(o.settings.editor={}),o.settings.codemirror&&n.extend(o.settings.editor,o.settings.codemirror),o.settings.editor.theme&&n(document.documentElement).addClass("cm-s-"+o.settings.editor.theme.split(" ")[0]),n.ajaxPrefilter(function(e,t,n){({head:1,get:1})[e.type.toLowerCase()]||e.url.match(/^https:\/\/api.github.com/)||n.setRequestHeader("x-csrf-token",o.state.token)}),o.owner=function(){return o.user&&o.user.name&&o.state.metadata&&o.state.metadata.name===o.user.name},o.getURL=function(e){e||(e={});var t=e.withoutRoot,n=e.root||o.root,i=t?"":n,r=o.state;return r.code&&(i+="/"+r.code,r.latest&&!e.withRevision||!1!==e.withRevision&&(i+="/"+(r.revision||1))),i},o.state.updateSettings=r(function(e,t){t||(t="POST"),o.state.code&&(e.checksum=o.state.checksum,n.ajax({type:t,url:o.getURL({withRevision:!0})+"/settings",data:e}))},500),o.$document=n(document),o.$body=n("body"),o.$window=n(window),o.throttle=r,o.escapeHTML=function(e){return String(e).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},o.debounceAsync=function(e){var t=!1,n=null;return function(){var i=[].slice.call(arguments,0);if(i.push(function(){t=!1,n&&(e.apply(n.context,n.args),n=null)}),!t)return t=!0,e.apply(this,i);n={args:i,context:this}}},o.objectValue=function(e,t){var n=e.split("."),i=n.length,o=1,r=t||window,s=r[e];try{if(void 0!==r[n[0]])for(r=r[n[0]];o<i&&void 0!==r[n[o]];o++)o===i-1&&(s=r[n[o]]),r=r[n[o]]}catch(e){s=void 0}return s},o.loginVisible=!1,o.dropdownOpen=!1,o.keyboardHelpVisible=!1,o.urlHelpVisible=!1,o.sideNavVisible=!1,o.infocardVisible=!1,o}),e("skylark-jsbin-base/main",["./jsbin"],function(e){return e}),e("skylark-jsbin-base",["skylark-jsbin-base/main"],function(e){return e})}(n),!i){var s=require("skylark-langx-ns");o?module.exports=s:t.skylarkjs=s}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-jsbin-base.js.map
